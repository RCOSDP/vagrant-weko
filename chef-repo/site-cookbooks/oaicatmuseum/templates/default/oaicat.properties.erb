# OAICatMuseum Configuration

# This parameter is optional. Comment it out if you want the code to get the baseURL
# from the request instead. Setting it here is only necessary if your firewall messes
# with the request in a way that alters the baseURL from your expectations.
#OAIHandler.baseURL=http://alcme.oclc.org/oaicat/OAIHandler

AbstractCatalog.secondsToLive=3600

# Here are some AbstractCatalog settings for JDBC
AbstractCatalog.oaiCatalogClassName=ORG.oclc.oai.server.catalog.JDBCLimitedOAICatalog

# Choose one (The "Limited" version understands JDBC's Limited SQL processing)
#AbstractCatalog.oaiCatalogClassName=ORG.oclc.oai.server.catalog.JDBCLimitedOAICatalog
AbstractCatalog.recordFactoryClassName=ORG.oclc.oai.server.catalog.JDBCRecordFactory

# Choose one of the following two
#AbstractCatalog.granularity=YYYY-MM-DDThh:mm:ssZ

# Here are the settings for JDBCOAICatalog
JDBCLimitedOAICatalog.maxListSize=100

# Uncomment this if the SQL queries expect UTC dates, otherwise
# the default is "YYYY/MM/DD"
JDBCLimitedOAICatalog.dateFormat=UTC

JDBCLimitedOAICatalog.jdbcDriverName=com.mysql.jdbc.Driver
JDBCLimitedOAICatalog.jdbcURL=jdbc:mysql://localhost:3306/oaicatdb
JDBCLimitedOAICatalog.jdbcLogin=oaicatdb
JDBCLimitedOAICatalog.jdbcPasswd=oaicatdb!
JDBCLimitedOAICatalog.isPersistentConnection=true

#    SQL tables
# metadata_record = sql table containing the item's metadata
# set_list = sql table containing the list of sets for this repository
# about_list = sql table containing the list of about elements returned from this repository.
# record_set_map = sql table associating metadata_records with the sets it is in from the set_list table.
# record_about_map = sql table associating metadata_records with the about values from the about_list table.

#    Required SQL table columns
# metadata_record.local_identifier = local identifier for the record.
# metadata_record.timestamp = the timestamp to be used for OAI from/until range limits
# metadata_record.xml = the xml source
# SQL query tokens: \\f = from, \\u = until, \\s = set, \\i = localIdentifier, \\o = oaiIdentifier
JDBCLimitedOAICatalog.identifierQuery=SELECT * FROM metadata_record WHERE local_identifier='\\i'
JDBCLimitedOAICatalog.rangeQuery=SELECT * FROM metadata_record WHERE (timestamp BETWEEN '\\f' AND '\\u') LIMIT \\a,\\b
JDBCLimitedOAICatalog.rangeSetQuery=SELECT * FROM metadata_record, record_set_map WHERE record_set_map.local_identifier=metadata_record.local_identifier AND (metadata_record.timestamp BETWEEN '\\f' AND '\\u') AND record_set_map.set_spec LIKE '\\s' LIMIT \\a,\\b
JDBCLimitedOAICatalog.setQuery=SELECT set_spec, set_name, set_description FROM set_list
JDBCLimitedOAICatalog.setSpecQuery=SELECT set_spec FROM record_set_map WHERE local_identifier='\\i'
JDBCLimitedOAICatalog.aboutQuery=SELECT about_value FROM record_about_map, about_list WHERE record_about_map.local_identifier='\\i' AND about_list.about_ID=record_about_map.about_ID

# JDBCOAICatalog (Set) table map
JDBCLimitedOAICatalog.setSpecItemLabel=record_set_map.set_spec
JDBCLimitedOAICatalog.aboutValueLabel=about_list.about_value
JDBCLimitedOAICatalog.setSpecListLabel=set_list.set_spec
JDBCLimitedOAICatalog.setNameLabel=set_list.set_name
JDBCLimitedOAICatalog.setDescriptionLabel=set_list.set_description

# JDBCRecordFactory settings
JDBCRecordFactory.repositoryIdentifier=oaicat.oclc.org
JDBCRecordFactory.identifierLabel=metadata_record.local_identifier
JDBCRecordFactory.datestampLabel=metadata_record.timestamp
JDBCRecordFactory.statusLabel=metadata_record.status
JDBCRecordFactory.deleteIndicator=deleted

# Latin-1 Source Data? (0 if no, 1 if yes)
JDBCOAICatalog.latin1=0

# Field label relations for dublin core elements
JDBC2oai_dc.xmlLabel=metadata_record.xml

# Custom Identify response values
Identify.repositoryName=OAICatMuseum Repository
Identify.adminEmail=mailto:yourname@yoursite.xyz
Identify.earliestDatestamp=0001-01-01
Identify.deletedRecord=persistent

# This is the way to specify <description> elements in general for the Identify verb
# Append something unique like .1, .2, etc to 'Identify.description' for each occurrence
Identify.description.1=<description><oai-identifier xmlns=\"http://www.openarchives.org/OAI/2.0/oai-identifier\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.openarchives.org/OAI/2.0/oai-identifier http://www.openarchives.org/OAI/2.0/oai-identifier.xsd\"><scheme>oai</scheme><repositoryIdentifier>oaicat.oclc.org</repositoryIdentifier><delimiter>:</delimiter><sampleIdentifier>oai:oaicat.oclc.org:oai/1</sampleIdentifier></oai-identifier></description>

# Crosswalks and XSLs for JDBC
Crosswalks.oai_dc=ORG.oclc.oai.server.crosswalk.JDBCLIDO2oai_dc
JDBCLIDO2oai_dc.classpathXSL=lido2oai_dc.xsl
Crosswalks.lido=ORG.oclc.oai.server.crosswalk.JDBCLIDO2lido
